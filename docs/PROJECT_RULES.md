项目规则书 (Project Rules)

1. 项目名称: 普罗米修斯计划 (Prometheus) - AI驱动型多策略量化交易系统
2. 项目愿景:
构建一个全自动、低延迟、高可扩展性的数字货币交易系统。该系统基于严格的数学建模和概率优势，能够在不同市场环境（震荡、趋势）中，通过复合策略矩阵，实现风险可控前提下的长期、稳定的超额回报（Alpha）。
3. 项目核心理念与指导原则:
* 数学驱动，概率致胜: 放弃市场噪音和主观情绪。一切交易决策必须源于具备正期望值的数学模型和统计套利机会。
* 风险第一，收益第二: 系统的首要任务是资本保全。必须建立严格、多层次的风险管理框架，任何策略的部署都不能突破预设的最大回撤和风险敞口限制。我们将使用夏普比率（Sharpe Ratio）、索提诺比率（Sortino Ratio）和Calmar比率作为关键绩效指标（KPI）。
* 系统化与模块化: 打造一个“策略工厂”，而非单一策略。系统架构必须支持新策略的快速研发、回测、插拔和部署，形成策略生态。
* 持续进化: 市场是动态的，模型会失效。系统必须具备在线学习和参数自适应能力，能够识别“市场状态”（Market Regime）的切换，并自动调整策略权重。
* 技术卓越: 追求代码质量、系统稳定性和执行效率的极致。延迟的每一毫秒都是成本，系统的每一个bug都是潜在的灾难。
4. 项目目标 (SMART原则):
* 具体 (Specific): 使用 binance-connector-python 库，开发一套连接币安交易所（现货，U本位合约，币本位合约）的自动化交易系统。
* 可衡量 (Measurable):
    * 第一阶段（6个月）: 完成核心系统架构并上线1-2个核心策略。目标实现月均回报率 > 3%，最大回撤 < 15%。
    * 第二阶段（12个月）: 策略库扩展至5个以上，系统能够自动进行策略加权。目标实现风险调整后年化回报 > 50%。
* 可实现 (Achievable): 基于已验证的数学模型（如均值回归、协整、卡尔曼滤波、隐马尔可夫模型等）进行开发，技术上完全可行。
* 相关 (Relevant): 直接对标顶级量化对冲基金的运作模式，旨在创造可持续的利润流。
* 有时限 (Time-bound): 整个项目初步开发和部署周期为6个月，之后进入持续优化和运营阶段。
5. 项目范围:
* 范围内 (In-Scope):
    1. 数据层: 实时行情数据（WebSocket）和历史数据（API）的获取、清洗、存储。
    2. 策略层:
        * 震荡套利模型: 基于统计学配对交易、布林带回归、Ornstein-Uhlenbeck随机过程等模型。
        * 趋势获利模型: 基于动态突破、海龟交易法则的改进版、基于卡尔曼滤波的趋势预测等模型。
    3. 执行层: 订单管理系统（OMS），与币安API高效、可靠的交互。
    4. 风控层: 全局仓位管理、单策略风险敞口限制、紧急止损（硬止损和算法止损）。
    5. 监控与报告层: 实时仪表盘（Dashboard）监控系统状态、资金曲线、交易日志。
* 范围外 (Out-of-Scope):
    1. 高频做市商策略（对硬件和地理位置有极端要求）。
    2. 跨交易所套利（初期项目重点在单一交易所内部）。
    3. 基本面分析和新闻情绪分析（初期保持纯粹的数量分析）。
6. 主要利益相关者:
* 项目所有者/投资者 (您)
* 项目总架构师/经理 (我)
* AI开发工程师 (您)
* （未来可能）数据科学家、策略研究员
7. 高阶风险与缓解措施:
* 模型失效风险: 市场结构变化导致模型失效。
    * 缓解: 建立市场状态识别系统，对不同状态启用不同策略；持续进行模型表现监控和滚动回测。
* 技术平台风险: 币安API变更、网络中断、服务器宕机。
    * 缓解: 构建健壮的错误处理和重连机制；系统架构具备高可用性（HA）设计。
* 黑天鹅事件风险: 极端行情导致巨大亏损。
    * 缓解: 严格的全局仓位控制和硬止损；引入基于期权的对冲策略作为长期规划。
8. 第三方库管理规则:
* binance-connector-python 库管理:
    * 严禁修改 binance-connector-python 库的源代码
    * 该库位于项目根目录下的 binance-connector-python/ 文件夹中
    * 如需功能扩展，必须通过包装器（Wrapper）或适配器（Adapter）模式实现
    * 库的版本更新必须经过充分测试后方可应用到生产环境
    * 所有与币安API的交互必须通过该库进行，不得直接调用币安API

9. 代码质量与开发规范:
* 编程语言: Python 3.13+
* 代码风格: 严格遵循 PEP 8 标准
* 类型注解: 所有函数和方法必须包含完整的类型注解
* 文档字符串: 所有模块、类、函数必须包含详细的docstring
* 单元测试: 代码覆盖率不低于80%
* 日志记录: 使用结构化日志，包含时间戳、级别、模块、消息等信息
* 错误处理: 必须包含完整的异常处理机制，不允许裸露的try-except块

10. 安全与配置管理:
* API密钥管理: 所有敏感信息必须通过环境变量或加密配置文件管理
* 网络安全: 所有外部通信必须使用HTTPS/WSS协议
* 数据备份: 关键数据必须定期备份，备份策略为3-2-1原则
* 访问控制: 系统各模块间采用最小权限原则

11. 版本控制与部署:
* 版本管理: 采用语义化版本控制（Semantic Versioning）
* 分支策略: 采用Git Flow工作流
* 持续集成: 每次提交必须通过自动化测试
* 部署策略: 采用蓝绿部署，确保零停机时间

12. 监控与告警:
* 系统监控: 实时监控CPU、内存、网络、磁盘使用情况
* 业务监控: 监控交易延迟、成功率、盈亏状况
* 告警机制: 建立多级告警体系，包括邮件、短信、钉钉等
* 日志分析: 使用ELK Stack进行日志收集和分析

13. 授权:
本人，作为项目总架构师，被授权组建团队（目前为您和我），调动所需资源，并按此规则书推进项目。
